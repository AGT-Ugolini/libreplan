<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping package="org.navalplanner.business.workreports.entities" default-access="field">

<!-- WorkReportType -->
<class name="WorkReportType" table="WORK_REPORT_TYPE">
    <id name="id" type="long" access="property">
        <generator class="hilo">
            <param name="max_lo">100</param>
        </generator>
    </id>
    <version name="version" access="property" type="long" />

    <property name="name"/>

    <set name="criterionTypes" table="CRITERION_TYPE_WORK_REPORT_TYPE" inverse="false">
        <key column="WORK_REPORT_TYPE_ID" not-null="false" />
        <many-to-many class="org.navalplanner.business.resources.entities.CriterionType" column="CRITERION_TYPE_ID"/>
    </set>
</class>

<!-- WorkReport -->
<class name="WorkReport" table="WORK_REPORT">
    <id name="id" type="long" access="property">
        <generator class="hilo">
            <param name="max_lo">100</param>
        </generator>
    </id>
    <version name="version" access="property" type="long" />

    <property name="date"/>
    <property name="place"/>
    <property name="responsible"/>

    <many-to-one name="workReportType" class="WorkReportType" column="WORK_REPORT_TYPE_ID" not-null="true"/>

    <set name="workReportLines" cascade="all-delete-orphan" inverse="false">
        <key column="WORK_REPORT_ID"/>
        <one-to-many class="WorkReportLine"/>
    </set>
</class>

<!-- WorkReportLine -->
<class name="WorkReportLine" table="WORK_REPORT_LINE">
    <id name="id" type="long" access="property">
        <generator class="hilo">
            <param name="max_lo">100</param>
        </generator>
    </id>
    <version name="version" access="property" type="long" />

    <property name="numHours"/>

    <many-to-one name="workReport" class="org.navalplanner.business.workreports.entities.WorkReport" column="WORK_REPORT_ID" />

    <many-to-one name="resource" class="org.navalplanner.business.resources.entities.Resource" column="RESOURCE_ID" not-null="true"/>

    <many-to-one name="orderElement" class="org.navalplanner.business.orders.entities.OrderElement" column="ORDER_ELEMENT_ID" not-null="true"/>

    <set name="criterions" table="CRITERION_WORK_REPORT_LINE" cascade="all" inverse="false">
        <key column="WORK_REPORT_LINE_ID" not-null="false" />
        <many-to-many class="org.navalplanner.business.resources.entities.Criterion" column="CRITERION_ID"/>
    </set>
</class>

</hibernate-mapping>
