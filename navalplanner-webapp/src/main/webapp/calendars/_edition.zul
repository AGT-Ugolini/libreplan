<window id="${arg.top_id}" title="${arg.title}" border="normal">


<tabbox>
    <tabs>
        <tab label="${i18n:_('Data')}" id="dataTab" />
        <tab label="${i18n:_('History')}"
            visible="@{controller.isEditing}" id="historyTab" />
    </tabs>
<tabpanels>

<tabpanel>

<vbox>

    <hbox>

    <vbox>

    <hbox>
        <label value="${i18n:_('Name')}" />
        <textbox value="@{controller.baseCalendar.name}"
            disabled="@{controller.isDateValidFromPast}" />
    </hbox>

    <hbox>
        <label value="${i18n:_('Type')}" />
        <vbox>
            <label value="@{controller.calendarType}" />
            <combobox id="parentCalendars"
                visible="@{controller.isDerived}"
                disabled="@{controller.isDateValidFromPast}" >
                <comboitem self="@{each='baseCalnedar'}" value="@{baseCalnedar}"
                    label="@{baseCalnedar.name}" />
            </combobox>
        </vbox>
    </hbox>

    <listbox id="hoursPerDay"
        model="@{controller.getHoursPerDay}"
        itemRenderer="@{controller.hoursPerDayRenderer}">
        <listhead>
            <listheader label="${i18n:_('Day of week')}" />
            <listheader label="${i18n:_('Hours')}" />
            <listheader label="${i18n:_('By default')}" />
        </listhead>
    </listbox>

    </vbox>

    <vbox id="dayInformation">

        <calendarhighlighteddays id="calendarWidget"
            value="@{controller.selectedDay,access='both'}"
            ancestorExceptionDays="@{controller.ancestorExceptionDays,access='both'}"
            ownExceptionDays="@{controller.ownExceptionDays,access='both'}"
            zeroHoursDays="@{controller.zeroHoursDays,access='both'}" />

        <hbox>
            <label value="${i18n:_('Type of day')}" />
            <label value="@{controller.typeOfDay}" />
        </hbox>

        <hbox>
            <label value="${i18n:_('Hours of day')}" />
            <label value="@{controller.hoursOfDay}" />
        </hbox>

        <hbox visible="@{controller.isNotSelectedDateFromPast}">
            <vbox>
                <button label="${i18n:_('Create exception')}"
                    onClick="controller.createException();" />
                <button disabled="@{controller.isNotExceptional}"
                    label="${i18n:_('Remove exception')}"
                    onClick="controller.removeException();" />
            </vbox>
            <intbox id="exceptionHours" value="0" />
        </hbox>
    </vbox>

    </hbox>

    <hbox visible="@{controller.isEditing}">
        <label value="${i18n:_('Valid from')}" />
        <datebox id="dateValidFrom" value="@{controller.dateValidFrom}"
            disabled="@{controller.isDateValidFromPast}" />
        <label value="${i18n:_('to')}" />
        <datebox id="expiringDate" value="@{controller.expiringDate}"
            disabled="@{controller.isLastVersion}" />
    </hbox>

    <hbox>
        <button onClick="controller.save();"
            label="${arg.save_button_label}" />
        <button onClick="controller.cancel();"
            label="${arg.cancel_button_label}" />
        <button onClick="controller.createNewVersion();"
            label="${i18n:_('Create new version')}"
            visible="@{controller.isEditing}" />
    </hbox>

</vbox>

</tabpanel>

<tabpanel>

    <listbox model="@{controller.historyVersions}"
        itemRenderer="@{controller.historyVersionsRenderer}">
        <listhead>
            <listheader label="${i18n:_('Name')}" />
            <listheader label="${i18n:_('Valid from')}" />
            <listheader label="${i18n:_('Expiring Date')}" />
            <listheader label="${i18n:_('Summary')}" />
            <listheader label="${i18n:_('Operations')}" />
        </listhead>
    </listbox>

</tabpanel>

</tabpanels>
</tabbox>

</window>