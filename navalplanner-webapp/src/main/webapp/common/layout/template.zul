<!--
  This file is part of NavalPlan

  Copyright (C) 2009-2010 Fundación para o Fomento da Calidade Industrial e
                     Desenvolvemento Tecnolóxico de Galicia

  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU Affero General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.

  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU Affero General Public License for more details.

  You should have received a copy of the GNU Affero General Public License
  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->

<?taglib uri="/WEB-INF/tld/i18n.tld" prefix="i18n"?>
<?link rel="stylesheet" type="text/css" href="/common/css/navalplan.css"?>
<?link rel="stylesheet" type="text/css" href="/common/css/navalplan_zk.css"?>
<?link rel="stylesheet" type="text/css" href="/common/css/perspectives.css"?>
<?component name="customMenu" inline="true" macroURI="_customMenu.zul"?>

<?variable-resolver class="org.zkoss.zkplus.spring.DelegatingVariableResolver"?>


<zk>

<zscript>
<![CDATA[
    contextPath = Executions.getCurrent().getContextPath();
    templateCtrl = templateController;
]]>
</zscript>

<scripts />

<div xmlns:n="http://www.zkoss.org/2005/zk/native"
    apply="${templateCtrl}">

<n:div>
<n:table width="100%" border="0" cellpadding="0" cellspacing="0">
  <n:tr>
    <n:td width="180" valign="center">
        <n:a href="${contextPath}/">
        <n:img src="${contextPath}/common/img/logo.png" /></n:a></n:td>
  <n:td valign="top">
  <n:table width="100%"  border="0" cellspacing="0" cellpadding="0">
    <n:tr>
      <n:td>

        <customMenu top_id="customMenu" title="${i18n:_('Main menu')}"/>

        </n:td>
    </n:tr>
  </n:table></n:td>
  </n:tr>
</n:table>


      <n:div class="user-area">
          <n:table width="100%" border="0" cellspacing="0" cellpadding="0">
            <n:tr>
              <n:td class="usuario">
                ${i18n:_('scenario')}:
                <button onClick="templateCtrl.changeScenario();"
                    label="${templateCtrl.scenario.name}" />
                <window id="changeScenarioWindow" visible="false"
                    title="${i18n:_('Change scenario')}">
                    <div id="messagesContainer" />
                    <grid>
                        <rows>
                            <row>
                                <label value="${i18n:_('Select scenario')}" />
                                <bandboxSearch
                                    id="scenarioBandboxSearch"
                                    finder="ScenarioBandboxFinder"
                                    model="@{templateCtrl.scenarios}"
                                    selectedElement="@{templateCtrl.scenario}" />
                            </row>
                        </rows>
                    </grid>
                    <button onClick="templateCtrl.accept();"
                        label="${i18n:_('Accept')}" />
                    <button onClick="templateCtrl.cancel();"
                        label="${i18n:_('Cancel')}" />
                </window>
              </n:td>
              <n:td class="usuario">${i18n:_('user')}: ${desktop.execution.userPrincipal.name}</n:td>
              <n:td><n:a href="${contextPath}/j_spring_security_logout" class="cerrar_sesion">[${i18n:_('Log out')}]</n:a></n:td>
            </n:tr>
          </n:table>
        </n:div>

    <borderlayout class="main-layout" width="auto">
    <!-- borderlayout class="main-layout" height="2000px" width="2000px"-->
    <west class="perspectives-column" width="90px">
        <n:div>
        <vbox pack="center" align="center" width="90px" height="30px">
            <label class="perspectives-label">${i18n:_('Perspectives')}</label>
        </vbox>
        <vbox id="registeredItemsInsertionPoint" width="90px"/>
        </n:div>
    </west>
    <center class="main-area">
        <div self="@{insert(content)}"/>
    </center>
    </borderlayout>

<n:table width="100%">
  <n:tr class="footer">
    <n:td height="40" align="right" valign="bottom">
        <n:img width="110" height="40" src="${contextPath}/common/img/logos_footer_fundacion.png"/>
        <n:img width="253" height="40" src="${contextPath}/common/img/logos_footer_administracion.png"/>
    </n:td>

  </n:tr>
</n:table>
</n:div>
</div>
<div />


</zk>
